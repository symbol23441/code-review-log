# å°å‚…å“¥é¡¹ç›®ï¼š OpenAi ä»£ç è¯„å®¡
### ğŸ˜ä»£ç è¯„åˆ†ï¼š60
#### ğŸ˜ä»£ç é€»è¾‘ä¸ç›®çš„ï¼š
ä»£ç çš„ä¸»è¦é€»è¾‘æ˜¯è·å–Gitä»“åº“æœ€è¿‘ä¸¤æ¬¡æäº¤çš„å·®å¼‚ï¼Œç„¶åè°ƒç”¨ChatGLMæ¥å£è¿›è¡Œä»£ç è¯„å®¡ï¼Œå¹¶å°†è¯„å®¡ç»“æœå†™å…¥æ–‡ä»¶å¹¶æ¨é€åˆ°GitHubä»“åº“ï¼Œæœ€åé€šè¿‡å¾®ä¿¡å…¬ä¼—å·å‘é€é€šçŸ¥ã€‚
#### âœ…ä»£ç ä¼˜ç‚¹ï¼š
1. ä½¿ç”¨SLF4Jè¿›è¡Œæ—¥å¿—ç®¡ç†ï¼Œä¾¿äºè¿½è¸ªè¿è¡Œä¿¡æ¯ã€‚
2. ä½¿ç”¨äº†æ¥å£å’Œå®ç°åˆ†ç¦»çš„è®¾è®¡æ¨¡å¼ï¼Œå…·æœ‰è‰¯å¥½çš„æ‰©å±•æ€§ã€‚
3. GitHubFileWriterç±»å®ç°äº†ICodeReviewResultWriteræ¥å£ï¼Œå¹¶ä½¿ç”¨JGitåº“è¿›è¡ŒGitæ“ä½œï¼Œå®ç°äº†å°†ä»£ç è¯„å®¡ç»“æœå†™å…¥æ–‡ä»¶å¹¶æ¨é€åˆ°GitHubçš„åŠŸèƒ½ã€‚
4. WeixinNoticeç±»å®ç°äº†INoticeServiceæ¥å£ï¼Œå¹¶ä½¿ç”¨HttpClientè°ƒç”¨å¾®ä¿¡é€šçŸ¥æ¥å£ï¼Œå®ç°äº†å…¬ä¼—å·é€šçŸ¥åŠŸèƒ½ã€‚
5. ä½¿ç”¨äº†å•å…ƒæµ‹è¯•æ¥éªŒè¯ä»£ç çš„æ­£ç¡®æ€§ã€‚

#### ğŸ¤”é—®é¢˜ç‚¹ï¼š
1. åœ¨GitHubFileWriterä¸­ï¼Œæ²¡æœ‰å¤„ç†Gitæ“ä½œå¯èƒ½å‡ºç°çš„å¼‚å¸¸ï¼Œå¦‚GitAPIExceptionç­‰ã€‚
2. åœ¨WeixinNoticeä¸­ï¼Œæ²¡æœ‰å¤„ç†HttpClientè¯·æ±‚å¯èƒ½å‡ºç°çš„å¼‚å¸¸ï¼Œå¦‚IOExceptionç­‰ã€‚
3. åœ¨GitServiceImpä¸­ï¼Œç›´æ¥å°†Processçš„è¾“å‡ºæµè½¬æ¢ä¸ºStringï¼Œå¦‚æœè¾“å‡ºå†…å®¹å¾ˆå¤§ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æº¢å‡ºã€‚
4. åœ¨ChatGLMServiceImpä¸­ï¼Œæ²¡æœ‰å¤„ç†HttpClientè¯·æ±‚å¯èƒ½å‡ºç°çš„å¼‚å¸¸ï¼Œå¦‚IOExceptionç­‰ã€‚
5. åœ¨Main.javaä¸­ï¼Œæ²¡æœ‰å¤„ç†å¯èƒ½å‡ºç°çš„å¼‚å¸¸ï¼Œå¦‚IOExceptionã€InterruptedExceptionç­‰ã€‚

#### ğŸ¯ä¿®æ”¹å»ºè®®ï¼š
1. åœ¨GitHubFileWriterä¸­ï¼Œæ·»åŠ try-catchå—æ¥æ•è·Gitæ“ä½œå¯èƒ½å‡ºç°çš„å¼‚å¸¸ã€‚
2. åœ¨WeixinNoticeä¸­ï¼Œæ·»åŠ try-catchå—æ¥æ•è·HttpClientè¯·æ±‚å¯èƒ½å‡ºç°çš„å¼‚å¸¸ã€‚
3. åœ¨GitServiceImpä¸­ï¼Œä½¿ç”¨BufferedReaderæ¥è¯»å–Processçš„è¾“å‡ºæµï¼Œé¿å…å†…å­˜æº¢å‡ºã€‚
4. åœ¨ChatGLMServiceImpä¸­ï¼Œæ·»åŠ try-catchå—æ¥æ•è·HttpClientè¯·æ±‚å¯èƒ½å‡ºç°çš„å¼‚å¸¸ã€‚
5. åœ¨Main.javaä¸­ï¼Œæ·»åŠ try-catchå—æ¥æ•è·å¯èƒ½å‡ºç°çš„å¼‚å¸¸ã€‚

#### ğŸ’»ä¿®æ”¹åçš„ä»£ç ï¼š
```java
// åœ¨GitHubFileWriterä¸­æ·»åŠ try-catchå—
try {
    git.add().addFilepattern(dateFolderName + "/" + fileName).call();
    git.commit().setMessage("Add new file via GitHub Actions").call();
    git.push().setCredentialsProvider(new UsernamePasswordCredentialsProvider(gitUserName, gitToken)).call();
} catch (GitAPIException e) {
    logger.error("Gitæ“ä½œå¤±è´¥", e);
    return null;
}

// åœ¨WeixinNoticeä¸­æ·»åŠ try-catchå—
try {
    HttpResponse<String> notice_response = client.send(notice_request, HttpResponse.BodyHandlers.ofString());
    logger.info("å¾®ä¿¡æ¨¡ç‰ˆé€šçŸ¥è¯·æ±‚å“åº”ï¼ŒçŠ¶æ€ç ä¸º{},bodyä¸º{}", notice_response.statusCode(), notice_response.body());
} catch (Exception e) {
    logger.error("å¾®ä¿¡æ¨¡ç‰ˆé€šçŸ¥apiè¯·æ±‚Erro,e: {}", e.getMessage());
    return false;
}

// åœ¨GitServiceImpä¸­ä½¿ç”¨BufferedReader
try (BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()))) {
    String line;
    StringBuilder context = new StringBuilder();
    while ((line = reader.readLine()) != null) {
        context.append(line);
        context.append(System.lineSeparator());
    }
    return context.toString();
} catch (IOException e) {
    logger.error("è¯»å–Git diffè¾“å‡ºå¤±è´¥", e);
    return "";
}

// åœ¨ChatGLMServiceImpä¸­æ·»åŠ try-catchå—
try {
    HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
    ChatGLMSyncResponseDTO responseDTO = JSON.parseObject(response.body(), ChatGLMSyncResponseDTO.class);
    return responseDTO.getChoices().get(0).getMessage().getContent();
} catch (IOException | InterruptedException e) {
    logger.error("è°ƒç”¨ChatGLMæ¥å£å¤±è´¥", e);
    return "";
}

// åœ¨Main.javaä¸­æ·»åŠ try-catchå—
try {
    // è·å–Git diffç­‰æ“ä½œ
} catch (Exception e) {
    logger.error("æ‰§è¡Œä»£ç è¯„å®¡æµç¨‹å¤±è´¥", e);
}
```

#### ä»£ç ä¸­çš„ä¼˜ç‚¹ï¼š
1. ä½¿ç”¨SLF4Jè¿›è¡Œæ—¥å¿—ç®¡ç†ï¼Œä¾¿äºè¿½è¸ªè¿è¡Œä¿¡æ¯ã€‚
2. ä½¿ç”¨äº†æ¥å£å’Œå®ç°åˆ†ç¦»çš„è®¾è®¡æ¨¡å¼ï¼Œå…·æœ‰è‰¯å¥½çš„æ‰©å±•æ€§ã€‚
3. GitHubFileWriterç±»å®ç°äº†ICodeReviewResultWriteræ¥å£ï¼Œå¹¶ä½¿ç”¨JGitåº“è¿›è¡ŒGitæ“ä½œï¼Œå®ç°äº†å°†ä»£ç è¯„å®¡ç»“æœå†™å…¥æ–‡ä»¶å¹¶æ¨é€åˆ°GitHubçš„åŠŸèƒ½ã€‚
4. WeixinNoticeç±»å®ç°äº†INoticeServiceæ¥å£ï¼Œå¹¶ä½¿ç”¨HttpClientè°ƒç”¨å¾®ä¿¡é€šçŸ¥æ¥å£ï¼Œå®ç°äº†å…¬ä¼—å·é€šçŸ¥åŠŸèƒ½ã€‚
5. ä½¿ç”¨äº†å•å…ƒæµ‹è¯•æ¥éªŒè¯ä»£ç çš„æ­£ç¡®æ€§ã€‚

#### ä»£ç çš„é€»è¾‘å’Œç›®çš„ï¼š
ä»£ç çš„ä¸»è¦é€»è¾‘æ˜¯è·å–Gitä»“åº“æœ€è¿‘ä¸¤æ¬¡æäº¤çš„å·®å¼‚ï¼Œç„¶åè°ƒç”¨ChatGLMæ¥å£è¿›è¡Œä»£ç è¯„å®¡ï¼Œå¹¶å°†è¯„å®¡ç»“æœå†™å…¥æ–‡ä»¶å¹¶æ¨é€åˆ°GitHubä»“åº“ï¼Œæœ€åé€šè¿‡å¾®ä¿¡å…¬ä¼—å·å‘é€é€šçŸ¥ã€‚ç›®çš„æ˜¯å®ç°è‡ªåŠ¨åŒ–çš„ä»£ç è¯„å®¡æµç¨‹ï¼Œæé«˜ä»£ç è´¨é‡ã€‚