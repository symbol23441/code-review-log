# é¡¹ç›®åç§°ï¼šai-code-review.

> æäº¤ä¿¡æ¯ï¼šæäº¤åˆ†æ”¯: github-secrets-version; æäº¤å¤‡æ³¨: feat: more project git infomation; acr repo resetting; test v0.3; æäº¤ä½œè€…: symbol23441 <symbol23441@163.com>; æäº¤æ—¶é—´: 2025-06-08 18:20:18 +0800

### ğŸ˜€ä»£ç è¯„åˆ†ï¼š85

#### ğŸ˜€ä»£ç é€»è¾‘ä¸ç›®çš„ï¼š

ä»æäº¤çš„ä¿¡æ¯æ¥çœ‹ï¼Œä»£ç çš„ç›®çš„æ˜¯ä¸ºäº†åœ¨GitHub Actionså·¥ä½œæµä¸­è·å–åˆ†æ”¯åç§°å’Œæäº¤ä½œè€…ä¿¡æ¯ï¼Œä»¥ä¾¿åœ¨åç»­çš„æ­¥éª¤ä¸­ä½¿ç”¨è¿™äº›ä¿¡æ¯ã€‚

#### âœ…ä»£ç ä¼˜ç‚¹ï¼š

- ä½¿ç”¨äº†GitHub Actionsç¯å¢ƒå˜é‡æ¥å­˜å‚¨è·å–çš„ä¿¡æ¯ï¼Œæ–¹ä¾¿åç»­æ­¥éª¤ä½¿ç”¨ã€‚
- åˆ©ç”¨`git log`å‘½ä»¤è·å–äº†æäº¤ä½œè€…ä¿¡æ¯ï¼Œè¿™æ˜¯ä¸€ç§ç›´æ¥æœ‰æ•ˆçš„æ–¹æ³•ã€‚

#### ğŸ¤”é—®é¢˜ç‚¹ï¼š

- åœ¨`main-sercert-remote-jar.yml`æ–‡ä»¶åä¸­ï¼Œ"sercert"å¯èƒ½æ˜¯æ‹¼å†™é”™è¯¯ï¼Œå¯èƒ½æ˜¯"secret"ã€‚
- ä»£ç ä¸­æ²¡æœ‰æ˜æ˜¾çš„æ€§èƒ½ç“¶é¢ˆï¼Œä½†æ˜¯`git log`å‘½ä»¤åœ¨æ²¡æœ‰é¢å¤–å‚æ•°çš„æƒ…å†µä¸‹å¯èƒ½ä¼šå½±å“æ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹ä»“åº“ä¸­ã€‚
- åœ¨`name`å­—æ®µä¸­ï¼Œæè¿°åº”è¯¥æ›´å…·æè¿°æ€§ï¼Œä»¥æ˜ç¡®æ¯ä¸ªæ­¥éª¤çš„ç›®çš„ã€‚
- åœ¨è·å–åˆ†æ”¯åç§°æ—¶ï¼Œæ²¡æœ‰è€ƒè™‘refs/tags/çš„æƒ…å†µã€‚

#### ğŸ¯ä¿®æ”¹å»ºè®®ï¼š

- æ›´æ­£æ–‡ä»¶åä¸­çš„æ‹¼å†™é”™è¯¯ã€‚
- ä½¿ç”¨`git log --oneline`ä»¥å‡å°‘è¾“å‡ºï¼Œæé«˜æ€§èƒ½ã€‚
- åœ¨æ­¥éª¤æè¿°ä¸­ä½¿ç”¨æ›´åŠ æ˜ç¡®çš„å‘½åï¼Œå¦‚"Set branch name"å’Œ"Set commit author"ã€‚
- è€ƒè™‘refs/tags/çš„æƒ…å†µæ¥è·å–åˆ†æ”¯åç§°ã€‚

#### ğŸ’»ä¿®æ”¹åçš„ä»£ç ï¼š

```yaml
jobs:
  id: branch-name
  run: echo "BRANCH_NAME=${GITHUB_REF#refs/heads/}" >> $GITHUB_ENV

  - name: Set commit author
    id: commit-author
    run: echo "COMMIT_AUTHOR=$(git log --oneline -1 --pretty=format:'%an <%ae>')" >> $GITHUB_ENV
```

æ³¨æ„ï¼šä»¥ä¸Šä¿®æ”¹å‡è®¾äº†åŸå§‹ä»£ç çš„æ„å›¾å’Œä¸Šä¸‹æ–‡ï¼Œå…·ä½“ä¿®æ”¹å¯èƒ½è¿˜éœ€è¦æ ¹æ®é¡¹ç›®çš„å®é™…éœ€æ±‚æ¥è°ƒæ•´ã€‚